<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"><!--charset: character encoding capable of encoding all characters on the web  -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><!--for browser compatibility: choose rendering engine to view the page in an correct view (for old ver. IE)  -->
    <title>Post-Vision 2020</title><!--declaring the title, or name, of the HTML document. displayed in the browser's title bar-->
    <meta name="description" content=""><!--keywords/snippet for search engines-->
    <meta name="viewport" content="width=device-width"><!--the browser will (probably) render the width of the page at the width of its own screen -->
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/p5.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="js/jszip.min.js"></script>
    <script src="js/FileSaver.min.js"></script>
    <style>
        ::-webkit-scrollbar {
            width: 13px;  /* Remove scrollbar space */
            height: 13px;
            background: rgb(160, 160, 160);
        }
        ::-webkit-scrollbar-thumb {
            background: rgb(225, 225, 225);
        }
        .collophon{
            background-color: rgb(30, 255, 20);
        }
        .collophon_open{
            background-color: rgb(30, 255, 20);
        }
        .essay::-webkit-scrollbar {
            width: 0px;  /* Remove scrollbar space */
            height: 0px;
            background: transparent;
        }
        .essay::-webkit-scrollbar-thumb {
            background: transparent;
        }
        .essayblock::-webkit-scrollbar {
            width: 0px;  /* Remove scrollbar space */
            height: 0px;
            background: transparent;
        }
        .essayblock::-webkit-scrollbar-thumb {
            background: transparent;
        }
        .collectblock::-webkit-scrollbar {
            width: 0px;  /* Remove scrollbar space */
            height: 0px;
            background: transparent;
        }
        .assetblock::-webkit-scrollbar {
            background: transparent;
        }
        .assetblock::-webkit-scrollbar-thumb {
            background: transparent;
        }
        #header{
            background-image: linear-gradient(to bottom, 
            rgba(0, 255, 0),
            rgba(120,255,120) 10%, 
            rgba(190, 255, 190) 20%,
            transparent 100%);
            }
        #quote{
            margin-left: 9%;
        }
        body{
            /*background-image: url("img/background1.png");*/
            background-image: url("img/grassland.jpg");
            background-position: center;
            /*background-size: cover;
            background-attachment: fixed;*/
            background-size: cover;
            background-attachment: scroll;
            width: 200vw;
            background-color: rgb(255, 255, 255);
            margin-bottom: 0px;
        }
        a{
            color: rgb(30, 30, 30);
            text-decoration: none;
        }
        a:hover{
            font-style: italic;
        }
        p{
            font-family: arialnarrow;
            font-style: normal;
            font-size: 1rem;
            line-height: 1.24rem;
            letter-spacing: 0px;
            color: rgb(30, 30, 30);
        }
        #title{
            font-family: arialnarrow;
            margin-top: 1.2rem;
            margin-bottom: 1.3rem;
            padding-top: 0rem;
            font-size: 3rem;
            line-height: 3.12rem;
            letter-spacing: -0.02rem;
        }
        .subtitle{
            font-family: arialnarrow;
            padding-top: 0.2rem;
            padding-bottom: 0.1rem;
            font-size: 2rem;
            line-height: 2.1rem;
            letter-spacing: 0px;
        }
        .keywords{
            font-family: arialnarrow;
            font-size: 1.4rem;
            margin-bottom: -0.4rem;
            line-height: 1.9rem;
            letter-spacing: 0px;
        }
        .essayblock{
            position: fixed;
            display: flex;
            font-family: arialnarrow;
            overflow-x: hidden;
            overflow-y: hidden;
            text-align: left;
            margin-top: 8vh;
            margin-left: 6%;
            margin-right: 13%;
            padding: 0rem;
            border: 0.8px dotted black;
            background-color: white;
            color: black;
            height: 86vh;
            width: 35.6vw;
            z-index: 40;
            transition: 0.7s;
        }
        .essayblockClose{
            height: 6vh;
            width: 8vw;
            z-index: 40;
            transition: 0.5s;
        }
        .essay{
            max-width: 93%;
            width: 93%;
            overflow-y: scroll;
            margin-left: 5.5%;
            padding-top: 0.5%;
            transition: 0.3s;
        }
        .essayClose{
            max-width: 0%;
            width: 0%;
            overflow-y: scroll;
            margin-left: 7%;
            padding-top: 3%;
            transition: 0.3s;
        }
        .cancelA{
            right: 0;
            top: 0;
            max-width: 6%;
            width: 6%;
            margin-right: 2%;
            padding-top: 1%;
            transition: 0.2s;
        }
        .cancelAClose{
            max-width: 0%;
            width: 0%;
            opacity: 0;
        }
        .cancel3{
            width: 50px;
            height: 30px;
            border-bottom: 2.6px solid black;
            transform: translateX(-6%) translateY(10%) rotate(45deg);
            margin: 0px;
            padding: 0px;
            transition: 0.7s;
        }
        .cancel4{
            width: 50px;
            height: 30px;
            border-bottom: 2.6px solid black;
            transform: translateX(-42%) translateY(-92%) rotate(-45deg);
            margin: 0px;
            transition: 0.7s;
        }
        .expand1{
            width: 40px;
            height: 30px;
            border-bottom: 2.6px solid black;
            transform: translateX(5%) translateY(12%) rotate(50deg);
            margin: 0px;
            padding: 0px;
            transition: 0.7s;
        }
        .expand2{
            width: 40px;
            height: 30px;
            border-bottom: 2.6px solid black;
            transform: translateX(16%) translateY(-90%) rotate(-50deg);
            margin: 0px;
            transition: 0.7s;
        }
        .expandClose{
            max-width: 0%;
            margin-top: 1%;
            width: 0%;
            opacity: 0;
            transition: 0.4s;
        }
        .expand{
            max-width: 6%;
            width: 6%;
            margin-top: 1%;
            opacity: 1;
        }
        .collectblock{
            position: fixed;
            font-family: arialnarrow;
            text-align: left;
            margin-top: 70vh;
            margin-bottom: 12vh;
            margin-left: 64.6vw;
            padding: 0rem;
            border: 0.8px dotted black;
            background-color: white;
            color: black;
            height: 26vh;
            width: 34vw;
            z-index: 40;
        }
        #downloadblock{
            display: flex;
            flex-direction: column;
            position: absolute;
            box-sizing: border-box;
            max-width: 100%;
            width: 100%;
            height: 100%;
            padding-top: 0;
            padding-bottom: 0;
            margin: 0;
            z-index: 999;
            overflow-y: hidden;
        }
        #click{
            /*position: absolute;*/
            display: block;
            margin-left: 3.1%;
            margin-top: 0;
            margin-bottom: 13vh;
            padding-top: 2.2%;
            z-index: 999;
            background-color: white;
            box-shadow: 5px 10px 10px white;
        }
        .assetblock{
            display: flex;
            margin-top: 4.5vh;
            position: absolute;
            padding-left: 3%;
            flex-wrap: wrap;
            overflow-x: hidden;
            overflow-y: scroll;
            max-width: 100%;
            width: 100%;
            height: 24vh;
        }
        #button{
            display: block;
            z-index: 999;
        }
        .button{
            display: inline;
            float: right;
            padding-left: 0.3rem;
            padding-right: 0.3rem;
            background: white;
            border: 0.8px dotted rgb(130, 130, 130);
            color: rgb(190, 190, 190);
            margin: 0;
            margin-right: 0.8rem;
        }
        .button.active{
            border: 0.8px dotted black;
            color: black;
            cursor: pointer;
        }
        .refresh{
            cursor: alias;
        }
        .asset{
            position: absolute;
            display: flex;
            flex-direction: column;
            max-width: 16vw;
            width: 16vw;
            max-height: auto;
            height: auto;
            z-index: 30;
            margin-left: 10px;
        }
        .largeasset{
            max-width: 19vw;
            width: 19vw;
            max-height: auto;
            height: auto;
        }
        .smallasset{
            max-width: 14vw;
            width: 14vw;
            max-height: auto;
            height: auto;
        }
        .nametag{
            display: block;
            /*display: inline-block;*/
            position: relative;
            top: 0rem;
            background-color: white;
            color: black;
            font-size: 1.4rem;
            line-height: 1.5rem;
            margin-top: 0rem;
            margin-bottom: 0rem;
            padding-left: 0.2rem;
            padding-right: 0.2rem;
            text-align: center;
            padding-top: 0.3rem;
            padding-bottom: 0.3rem;
            border: 0.8px dotted black;
            box-shadow: 10px 10px 12px rgb(0, 0, 0, 40%);
            max-width: 100%;
        }
        .startag{
            display: inline;
            /*display: inline-block;*/
            position: relative;
            top: 0rem;
            background-color: white;
            color: black;
            margin-top: 0.3rem;
            margin-bottom: 0rem;
            padding-left: 0.2rem;
            padding-right: 0.2rem;
            text-align: center;
            padding-top: 0.3rem;
            padding-bottom: 0.3rem;
            border: 0.8px dotted black;
            box-shadow: 10px 10px 12px rgb(0, 0, 0, 40%);
            max-width: 100%;
        }
        .assetimage{
            position: relative;
            max-width: 100%;
            width: 100%;
            height: auto;
        }
        .assetScreen{
            max-width: 100%;
            width: 100%;
        }
        img{
            max-width: 100%;
            width: 100%;
        }
        .asset:first-child{
            left: 520px;
            top: 80px;
        }
        .asset:nth-child(2){
            left: 700px;
            top: 450px;
        }
        .asset:nth-child(3){
            left: 1200px;
            top: 200px;
        }
        .asset:nth-child(4){
            left: 200px;
            top: 650px;
        }
        .asset:nth-child(5){
            left: 1500px;
            top: 600px;
        }
        .asset:nth-child(6){
            left: 1800px;
            top: 400px;
        }
        .asset:nth-child(7){
            left: 1000px;
            top: 1000px;
        }
        .asset:nth-child(8){
            left: 2250px;
            top: 1000px;
        }
        .asset:nth-child(9){
            left: 2500px;
            top: 200px;
        }
        .asset:nth-child(10){
            left: 1800px;
            top: 1200px;
        }
        .asset:nth-child(11){
            left: 520px;
            top: 1200px;
        }
        .asset:nth-child(12){
            left: 2900px;
            top: 400px;
        }
        @media print {
            body * {
                /*display:none;*/
                visibility: hidden;
            }
            .printable * {
                visibility: visible;
            }
            .printable {
                display: block;
                position: fixed;
                left: -300px;
                top: -800px;
            }
        }
    </style>
</head>
<body>
    <div class=essayblock>
        <div class=essay>
            <p id=title>A letter to the post-2020 adventurers:</p>
            <p class=keywords>Dear my friend,</p><br>
            <p class=keywords>Welcome! A garden is an open place where free gifts are circulated and offered to its visitors in hope of sharing delight and support.</p><br>
            <p class=keywords>Scattered around the space are 30 magic objects for self-empowering. Please feel free to collect 5 assets that you want to take with you the most in your future adventures! </p><br>
            <p class=keywords>Carefully select those that you need the most, or those that would empower you the most:) I wish you all the best in your post-2020 journey!</p><br>
            <p class=keywords>Yours sincerely,<br>Written in December, 2020</p><br><br>
        </div>

        <div class="cancelA aboutA">
            <p class=cancel3></p>
            <p class=cancel4></p>
        </div>
        <div class="expandClose aboutA">
            <p class=expand1></p>
            <p class=expand2></p>
        </div>
    </div>

    <div class="collectblock">
        <div id=downloadblock>
            <p class=subtitle id=click>Double click to collect your 5 assets!</p>
            <div class="assetblock printable"></div>
            <div id=button>
                <p class="subtitle button refresh inactive">‚Ü∫</p>
                <p class="subtitle button inactive" onclick="divPrint();">Print</p></a>
                <p class="subtitle button download inactive">Download</p>
            </div>
        </div>
    </div>

    <div class=assetScreen>
        <div class=asset>
            <div class=assetimage>
                <a href="img/assetA.png" onclick="return false"><img src="img/assetA.png"></a>
            </div>
            <p class=nametag>daily fresh fruits</p>
            <p class=startag>(‚àû/‚àû unlimited)<br>health ‚òÖ‚òÖ‚òÖ‚òÖ<br>longevity ‚òÖ‚òÖ‚òÖ</p>
        </div>

        <div class=asset>
            <div class=assetimage>
                <a href="img/assetB.png" onclick="return false"><img src="img/assetB.png"></a>
            </div>
            <p class=nametag>a key found in your childhood's cabin</p>
            <p class=startag>(use only ONCE)<br>courage ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ<br>risk‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è<br>surpriseüåÄüåÄüåÄüåÄüåÄ</p>
        </div>

        <div class="asset largeasset">
            <div class=assetimage>
                <a href="img/assetC.png" onclick="return false"><img src="img/assetC.png"></a>
            </div>
            <p class=nametag>weekly letters from mom</p>
            <p class=startag>(‚àû/‚àû unlimited)<br>unreserved support ‚òÖ‚òÖ‚òÖ<br>a person always by your side ‚òÖ‚òÖ‚òÖ</p>
        </div>

        <div class="asset smallasset">
            <div class=assetimage>
                <a href="img/assetD.png" onclick="return false"><img src="img/assetD.png"></a>
            </div>
            <p class=nametag>a deck of tarot cards</p>
            <p class=startag>(5 times only)<br>insight ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ<br>resolution ‚òÖ‚òÖ‚òÖ‚òÖ</p>
        </div>

        <div class="asset smallasset">
            <div class=assetimage>
                <a href="img/assetE.png" onclick="return false"><img src="img/assetE.png"></a>
            </div>
            <p class=nametag>a scarf worn by two people</p>
            <p class=startag>(10 times only)<br>empathy ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ<br>surpriseüåÄüåÄ<br><br> Wear the scarf together with another person, and you will hear what that person is thinking about right now.</p>
        </div>

        <div class="asset smallasset">
            <div class=assetimage>
                <a href="img/assetF.png" onclick="return false"><img src="img/assetF.png"></a>
            </div>
            <p class=nametag>artificial sun in your bedroom</p>
            <p class=startag>(‚àû/‚àû unlimited)<br>good mental health everyday ‚òÖ‚òÖ‚òÖ<br><br>Olafur Eliasson's Sun Light is being manufactured on a mass scale.</p>
        </div>

        <div class="asset smallasset">
            <div class="assetimage">
                <a href="img/assetG.png" onclick="return false"><img src="img/assetG.png"></a>
            </div>
            <p class=nametag>incantated perfume</p>
            <p class=startag>(20ml only)<br>charisma ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ<br>surprise üåÄüåÄüåÄ<br><br>Attract and convince other people without reservations! (Only work in one-to-one relationship.)</p>
        </div>

        <div class="asset smallasset">
            <div class=assetimage>
                <a href="img/assetH.png" onclick="return false"><img src="img/assetH.png"></a>
            </div>
            <p class=nametag>fast-learner's headset</p>
            <p class=startag>(‚àû/‚àû unlimited)<br>efficiency ‚òÖ‚òÖ‚òÖ‚òÖ<br>cleverness ‚òÖ‚òÖ‚òÖ<br><br>Wear this headset and you will become a fast learner like never before!</p>
        </div>

        <div class="asset">
            <div class=assetimage>
                <a href="img/assetI.png" onclick="return false"><img src="img/assetI.png"></a>
            </div>
            <p class=nametag>chivalrous hat</p>
            <p class=startag>(‚àû/‚àû unlimited)<br>sociability ‚òÖ‚òÖ‚òÖ<br>talkability ‚òÖ‚òÖ‚òÖ</p>
        </div>

        <div class="asset">
            <div class=assetimage>
                <a href="img/assetJ.png" onclick="return false"><img src="img/assetJ.png"></a>
            </div>
            <p class=nametag>cr√™pes cooking set</p>
            <p class=startag>(‚àû/‚àû unlimited)<br>generousity ‚òÖ‚òÖ‚òÖ<br>kindness ‚òÖ‚òÖ‚òÖ<br>surprise üåÄ<br><br>Cook a cr√™pe for your friend to receive 1 point of surpriseüåÄ!</p>
        </div>

        <div class="asset">
            <div class=assetimage>
                <a href="img/assetK.png" onclick="return false"><img src="img/assetK.png"></a>
            </div>
            <p class=nametag>antique dream catcher</p>
            <p class=startag>(‚àû/‚àû unlimited)<br>imagination ‚òÖ‚òÖ‚òÖ<br>sensibility ‚òÖ‚òÖ‚òÖ</p>
        </div>

        <div class="asset smallasset">
            <div class=assetimage>
                <a href="img/assetL.png" onclick="return false"><img src="img/assetL.png"></a>
            </div>
            <p class=nametag>a bag of magic seeds</p>
            <p class=startag>(unknown duration)<br>perseverance ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ<br>surpriseüåÄüåÄüåÄüåÄ<br><br>The longer you keep watering the seeds, the more <i>surprised</i> the outcomes would be!</p>
        </div>
    </div>

    <div class="collophon">
        <p class="collophontext description">This project is composed of four layers of narrative: <a href="calendar.html" class="collophontext collophonlink">‚ë† an archive of people‚Äôs previous projection into the future of 2020;</a> <a href="worldbuilding.html" class="collophontext collophonlink">‚ë° an essay on worldbuilding as a daily practice;</a><a href="room.html" class="collophontext collophonlink"> ‚ë¢ a meditation room of people‚Äôs daily stories in the face of a global crisis;</a><a href="garden.html" class="collophontext collophonlink"> ‚ë£ a garden of gifts/ offerings/ game props to prepare you for your future advantures.</a><br><br>Written and designed by Ningjing Sun ¬© 2020<br>Created as degree project for RISD BFA in Graphic Design<br>Special thanks to Marie Otsuka and all the friends I made at RISD during the 4.5 yrs</p>
        <p class="collophontext description">CHAPTER 4<br><br>A garden is a space where seeds of hope grow up. It is a fluid space that communicates vulnerability and intimacy, a space where gifts are circulated and offered to the visitors in the hope of sharing love, delight, and empathy. The last chapter of this project is a secret repository that aims to collect necessary assets which would prepare you for your future advantures. Click, collect, and carry the assets with you right away as we step into the new future together.</p>
        <div class=collophontext>
            <p class="collophontext about cancel1"></p>
            <p class="collophontext about cancel2"></p>
        </div>
    </div>

    <script>    //collophon
        $(".about").click(function(){
            $(".collophon").toggleClass("collophon_open");
        })

        $(".aboutA").click(function(){
            $(".essayblock").toggleClass("essayblockClose");
            $(".essay").toggleClass("essayClose");
            $(".cancelA").toggleClass("cancelAClose");
            $(".expandClose").toggleClass("expand");
        })
    </script>

    <script>    //make assets draggable
        $(function(){
            $(".asset").draggable();
        });
    </script>

    <script>    //collect + zip
        $(document).ready(function(){

            let assetUrls = [
                'assetA.png',
                'assetB.png',
                'assetC.png',
                'assetD.png',
                'assetE.png',
                'assetF.png',
                'assetG.png',
                'assetH.png'
            ]

            let downloadUrls=[];

            $(".assetimage").dblclick(function(){
                $(this).clone().css({"max-height":"9vh","max-width":"9vh","margin-top":"3vh","margin-right":"1vw"}).appendTo(".assetblock");
                let addUrl = $(this).find('a').attr('href');
                downloadUrls.push(addUrl);
                setupDownload();
            });

            /*
            function doClickAction() {
                return false; 
            }
            function doDoubleClickAction() {
                $("#double-click h2").append("‚Ä¢"); 
            }

            var timer = 0;
            var delay = 200;
            var prevent = false;

            $(".assetimage").
            .on("click", function(){
                timer = setTimeout(function() {
                if (!prevent) {
                    doClickAction();
                }
                prevent = false;
                }, delay);
            })
            .on("dblclick",(function(){
                clearTimeout(timer);
                prevent = true;
                $(this).clone().css({"height":"7vh","max-width":"7vh","margin-top":"2vh","margin-right":"1vw"}).appendTo(".assetblock");
                let addUrl = $(this).find('a').attr('href');
                downloadUrls.push(addUrl);
                setupDownload();
            });*/

            function setupDownload(){
                if (downloadUrls.length > 0){
                    $(".button").addClass('active');
                }
                else{
                    $(".button").removeClass('active');
                }
            }

            $(".download").click(function(){
                if($(".button").hasClass('active')){
                    saveToZip('garden.zip', downloadUrls);
                }
            });

            function saveToZip (filename, urls){
                const zip = new JSZip()
                const folder = zip.folder('world')
                urls.forEach((url)=> {
                    const blobPromise = fetch(url).then(r => {
                        if (r.status === 200) return r.blob()
                        return Promise.reject(new Error(r.statusText))
                    })
                const name = url.substring(url.lastIndexOf('/'))
                folder.file(name, blobPromise)
                })

                zip.generateAsync({type:"blob"})
                    .then(blob => saveAs(blob, filename))
                    .catch(e => console.log(e));
            }

            $(".refresh").click(function(){         //empty assetblock
                $(".assetblock").empty();
                $(".button").removeClass('active');
                downloadUrls = [];
            });
        });
    </script>

    <script>    //print
        function divPrint() {
            // Some logic determines which div should be printed...
            // This example uses div3.
            /*$(".assetblock").addClass("printable");*/
            window.print();
        }
        $(".print").click(function(){
            if($(".button").hasClass('active')){
                divPrint();
            }
        })
    </script>

    <script type="text/javascript">
        var edgeSizea = 240;
        var edgeSizeb = 480;
        var timer = null;

        window.addEventListener( "mousemove", handleMousemove, false );

        drawGridLines();

        // I adjust the window scrolling in response to the given mousemove event.
        function handleMousemove( event ) {

            // NOTE: Much of the information here, with regard to document dimensions,
            // viewport dimensions, and window scrolling is derived from JavaScript.info.
            // I am consuming it here primarily as NOTE TO SELF.
            // --
            // Read More: https://javascript.info/size-and-scroll-window
            // --
            // CAUTION: The viewport and document dimensions can all be CACHED and then
            // recalculated on window-resize events (for the most part). I am keeping it
            // all here in the mousemove event handler to remove as many of the moving
            // parts as possible and keep the demo as simple as possible.

            // Get the viewport-relative coordinates of the mousemove event.
            var viewportX = event.clientX;
            var viewportY = event.clientY;

            // Get the viewport dimensions.
            var viewportWidth = document.documentElement.clientWidth;
            var viewportHeight = document.documentElement.clientHeight;

            // Next, we need to determine if the mouse is within the "edge" of the 
            // viewport, which may require scrolling the window. To do this, we need to
            // calculate the boundaries of the edge in the viewport (these coordinates
            // are relative to the viewport grid system).
            var edgeTop = edgeSizea;
            var edgeLeft = edgeSizeb;
            var edgeBottom = ( viewportHeight - edgeSizea );
            var edgeRight = ( viewportWidth - edgeSizeb );

            var isInLeftEdge = ( viewportX < edgeLeft );
            var isInRightEdge = ( viewportX > edgeRight );
            var isInTopEdge = ( viewportY < edgeTop );
            var isInBottomEdge = ( viewportY > edgeBottom );

            // If the mouse is not in the viewport edge, there's no need to calculate
            // anything else.
            if ( ! ( isInLeftEdge || isInRightEdge || isInTopEdge || isInBottomEdge ) ) {

                clearTimeout( timer );
                return;
            }

            // If we made it this far, the user's mouse is located within the edge of the
            // viewport. As such, we need to check to see if scrolling needs to be done.

            // Get the document dimensions.
            // --
            // NOTE: The various property reads here are for cross-browser compatibility
            // as outlined in the JavaScript.info site (link provided above).
            var documentWidth = Math.max(
                document.body.scrollWidth,
                document.body.offsetWidth,
                document.body.clientWidth,
                document.documentElement.scrollWidth,
                document.documentElement.offsetWidth,
                document.documentElement.clientWidth
            );
            var documentHeight = Math.max(
                document.body.scrollHeight,
                document.body.offsetHeight,
                document.body.clientHeight,
                document.documentElement.scrollHeight,
                document.documentElement.offsetHeight,
                document.documentElement.clientHeight
            );

            // Calculate the maximum scroll offset in each direction. Since you can only
            // scroll the overflow portion of the document, the maximum represents the
            // length of the document that is NOT in the viewport.
            var maxScrollX = ( documentWidth - viewportWidth );
            var maxScrollY = ( documentHeight - viewportHeight );

            // As we examine the mousemove event, we want to adjust the window scroll in
            // immediate response to the event; but, we also want to continue adjusting
            // the window scroll if the user rests their mouse in the edge boundary. To
            // do this, we'll invoke the adjustment logic immediately. Then, we'll setup
            // a timer that continues to invoke the adjustment logic while the window can
            // still be scrolled in a particular direction.
            // --
            // NOTE: There are probably better ways to handle the ongoing animation
            // check. But, the point of this demo is really about the math logic, not so
            // much about the interval logic.
            (function checkForWindowScroll() {

                clearTimeout( timer );

                if ( adjustWindowScroll() ) {

                    timer = setTimeout( checkForWindowScroll, 30 );

                }

            })();

            // Adjust the window scroll based on the user's mouse position. Returns True
            // or False depending on whether or not the window scroll was changed.
            function adjustWindowScroll() {

                // Get the current scroll position of the document.
                var currentScrollX = window.pageXOffset;
                var currentScrollY = window.pageYOffset;

                // Determine if the window can be scrolled in any particular direction.
                var canScrollUp = ( currentScrollY > 0 );
                var canScrollDown = ( currentScrollY < maxScrollY );
                var canScrollLeft = ( currentScrollX > 0 );
                var canScrollRight = ( currentScrollX < maxScrollX );

                // Since we can potentially scroll in two directions at the same time,
                // let's keep track of the next scroll, starting with the current scroll.
                // Each of these values can then be adjusted independently in the logic
                // below.
                var nextScrollX = currentScrollX;
                var nextScrollY = currentScrollY;

                // As we examine the mouse position within the edge, we want to make the
                // incremental scroll changes more "intense" the closer that the user
                // gets the viewport edge. As such, we'll calculate the percentage that
                // the user has made it "through the edge" when calculating the delta.
                // Then, that use that percentage to back-off from the "max" step value.
                var maxStep = 14;

                // Should we scroll left?
                if ( isInLeftEdge && canScrollLeft ) {

                    var intensity = ( ( edgeLeft - viewportX ) / edgeSizeb );

                    nextScrollX = ( nextScrollX - ( maxStep * intensity ) );

                // Should we scroll right?
                } else if ( isInRightEdge && canScrollRight ) {

                    var intensity = ( ( viewportX - edgeRight ) / edgeSizeb );

                    nextScrollX = ( nextScrollX + ( maxStep * intensity ) );

                }

                // Should we scroll up?
                if ( isInTopEdge && canScrollUp ) {

                    var intensity = ( ( edgeTop - viewportY ) / edgeSizea );

                    nextScrollY = ( nextScrollY - ( maxStep * intensity ) );

                // Should we scroll down?
                } else if ( isInBottomEdge && canScrollDown ) {

                    var intensity = ( ( viewportY - edgeBottom ) / edgeSizea );

                    nextScrollY = ( nextScrollY + ( maxStep * intensity ) );

                }

                // Sanitize invalid maximums. An invalid scroll offset won't break the
                // subsequent .scrollTo() call; however, it will make it harder to
                // determine if the .scrollTo() method should have been called in the
                // first place.
                nextScrollX = Math.max( 0, Math.min( maxScrollX, nextScrollX ) );
                nextScrollY = Math.max( 0, Math.min( maxScrollY, nextScrollY ) );

                if (
                    ( nextScrollX !== currentScrollX ) ||
                    ( nextScrollY !== currentScrollY )
                    ) {

                    window.scrollTo( nextScrollX, nextScrollY );
                    return( true );

                } else {

                    return( false );

                }

            }

        }
        // I draw the grid and edge lines in the document so that it is clear where
        // scrolling will be initiated and with what intensity it is taking place.
        function drawGridLines() {

            var increment = 200;
            var incrementCount = 40;
            var maxDimension = ( increment * incrementCount );

            // Draw the boxes that make up the grid.
            for ( var x = 0 ; x < incrementCount/2 ; x++ ) {
                for ( var y = 0 ; y < incrementCount/3.5 ; y++ ) {

                    var xOffset = ( x * increment );
                    var yOffset = ( y * increment );

                    var box = document.createElement( "span" );
                    box.style.position = "absolute";
                    box.style.top = ( yOffset + "px" );
                    box.style.left = ( xOffset + "px" );
                    box.style.height = ( increment + "px" );
                    box.style.width = ( increment + "px" );
                    box.style.border = "1px solid rgb(244, 244, 244)";
                    box.style.font = "11px sans-serif";
                    box.style.color = "rgb(234, 234, 234)" ;
                    box.style.boxSizing = "border-box";
                    box.style.padding = "5px 5px 5px 5px";
                    /*box.innerText = ( xOffset + ", " + yOffset );*/
                    document.body.appendChild( box );

                }
            }
            
            /*
            // Draw the edges that delineate the scrolling zone.
            var edge = document.createElement( "span" );
            edge.style.position = "fixed";
            edge.style.top = ( edgeSizea + "px" );
            edge.style.bottom = ( edgeSizea + "px" );
            edge.style.left = ( edgeSizeb + "px" );
            edge.style.right = ( edgeSizeb + "px" );
            edge.style.border = "2px solid #CC0000";
            edge.style.borderRadius = "5px 5px 5px 5px";
            document.body.appendChild( edge );*/

            // Add mouse-guard so that nothing is selectable.
            var guard = document.createElement( "div" );
            guard.style.position = "fixed";
            guard.style.top = "0px";
            guard.style.bottom = "0px";
            guard.style.left = "0px";
            guard.style.right = "0px";
            document.body.appendChild( guard );
        }   //grid
    </script>

</body>
</html>
